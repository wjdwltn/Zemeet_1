<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Fri Feb 11 2022 07:31:31 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="61fb361452ff0252924db1dd" data-wf-site="61fb361452ff0215fe4db1db">
<head>
  <meta charset="utf-8">
  <title>Zemeet</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../user/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../user/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../user/css/zemeet.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Noto Sans KR:100,300,regular,500,700,900:korean,latin"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../user/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="../user/images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body1" >
  <div class="frame" id="mainbody" style="display:flex;">
    <div class="common_container">
      <div class="section1">
        <div class="chatblock"><img src="../user/images/zemeet_logo.svg" loading="lazy" alt="" class="logo"></a>
          <div class="chatbord" style="display:flex;">
            <div class="chattingbox" style="display:flex;">
              <div class="chatting_scroll">
                <!-- <div class="chatting _1">
                  <div class="chatbox _1">
                    <div>안녕하세요.</div>
                  </div>
                  <div class="chattime">오전 01:01</div>
                </div>
                <div class="chatting">
                  <div class="chatting_from">카운터</div>
                  <div class="chatbox _2">
                    <div>안녕하세요.</div>
                  </div>
                  <div class="chattime">오전 01:01</div>
                </div>-->
              </div>
            </div>
          </div>
          <div class="chattingbar">
            <div class="form-block w-form">
              <input type="text" class="text-field w-input" placeholder="채팅 내용을 입력해주세요" name="chat" id="chat">
            </div>
            <a href="javascript:chatSend()" class="button w-button">Send</a>
          </div>
        </div>
      </div>
      <div class="section2">
        <div class="topgame_block">
          <div class="title">게임 검색 순위 TOP 5</div>
          <% if (rows.length == 0) {%>
            <div class="nogame" id="nogamebox">검색된 게임이 없습니다.</div>
          <% } else {%>
            <% for(var i = 0; i < rows.length ; i++) { %>  <!--게임 순위대로 데이터 나열하는 모듈-->
              <div class="game_box" style="display:flex;"><img src="/<%= rows[i].pic %>"loading="lazy" alt="" class="game_logo">
                <div class="game_info">
                  <div class="lank _<%= i%>"><%= i+1 %>위</div>
                  <div class="game_namewarp">
                    <div class="game_name"><%= rows[i].Kname %></div>
                    <div class="game_genre"><%= rows[i].genre %></div>
                  </div>
                </div>
              </div>
            <% } %> 
          <% } %>
        </div>
      </div>
      <div class="section3">
        <div class="div-block-35">
          <div class="btn_topblock">
            <a href="#" class="wifi w-inline-block" onclick="openMainPop('wifipop')"><img src="../user/images/wifi.svg" loading="lazy" alt="" class="image-2"></a>
            <a href="#" class="callbtn w-inline-block" onclick="openMainPop('callpop')"><img src="../user/images/bell.svg" loading="lazy" alt="" class="bell">
              <div>직원 호출</div>
            </a>
            <div class="room">
              <div></div>
            </div>
            <a href="#" class="paytbtn w-inline-block" onclick="lastprice()">
              <div>후불금액 확인</div>
            </a>
            <div class="lefttime" onclick="openMainPop('addtime')" style="cursor:pointer">
              <div>남은시간: 00:00</div>
            </div>
            <div class="time" style="cursor:pointer">
              <div class = "currentTime"></div>
            </div>
          </div>
        </div>
        <div class="menu_block">
          <a href="javascript:gamepop()" class="menubtn _1 w-inline-block"><img src="../user/images/box1.png" loading="lazy" width="883" alt="" class="menubtnimg">
            <div class="menubtn_info">
              <div class="menutitle">게임 검색</div>
              <div>원하시는 게임을 찾아드립니다.</div>
            </div>
          </a>
          <a href="javascript:foodpop()" class="menubtn _2 w-inline-block"><img src="../user/images/box2.png" loading="lazy" width="841" alt="" class="menubtnimg">
            <div class="menubtn_info _2">
              <div class="menutitle">음식 주문</div>
              <div>맛있는 음식과 함께 즐기세요.</div>
            </div>
          </a>
          <a href="#" class="menubtn _3 w-inline-block"><img src="../user/images/box3.png" loading="lazy" width="909" alt="" class="menubtnimg">
            <div class="menubtn_info">
              <div class="menutitle">이용안내</div>
              <div>운영시간<br><br>평일 11 : 00 ~ 24 : 00<br>주말 11 : 00 ~ 02 : 00<br>공휴일 11:00 ~ 02 : 00</div>
            </div>
          </a>
        </div>
      </div>
    </div>    
  </div>  
  <!-- ====================================================================================================================================================== 음식주문-->
  <div class="frame" id="foodbody" style="display:none;">
    <div class="common_container2">
      <div class="top">
        <a href="javascript:returnpop()" class="top_closebtn w-inline-block"><img src="../user/images/Icon-awesome-backspace.svg" loading="lazy" alt="" class="image-8"></a>
        <div class="btn_topblock">
          <a href="#" class="wifi w-inline-block" onclick="openMainPop('wifipop')"><img src="../user/images/wifi.svg" loading="lazy" alt="" class="image-2"></a>
          <a href="#" class="callbtn w-inline-block" onclick="openMainPop('callpop')"><img src="../user/images/bell.svg" loading="lazy" alt="" class="bell">
            <div>직원 호출</div>
          </a>
          <div class="room">
            <div></div>
          </div>
          <a href="#" class="paytbtn w-inline-block" onclick="lastprice()">
            <div>후불금액 확인</div>
          </a>
          <div class="lefttime" onclick="openMainPop('addtime')" style="cursor:pointer">
            <div>남은시간: 00:00</div>
          </div>
          <div class="time" style="cursor:pointer">
            <div class = "currentTime"></div>
          </div>
        </div>
      </div>
      <div class="foodblock">
        <div class="foodsubblock">
          <div class="food_subblock">
            <a href="#" class="button-4 click w-button" id="all_" onclick="clickFood(this,'All')">전체</a>
            <a href="#" class="button-4 w-button" onclick="clickFood(this,'Food')" >Food Menu</a>
            <a href="#" class="button-4 w-button" onclick="clickFood(this,'Cafe')">Cafe Menu</a>
            <a href="#" class="button-4 w-button" onclick="clickFood(this,'Pub')">Pub Menu</a>
          </div>
          <div class="food_selectblock">
            <div class="food_selectscroll">
              <div class="food_selectbox">
              </div>
            </div>
          </div>
        </div>
        <div class="foodorderblock">
          <div class="text-block-3">주문목록</div>
          <div class="food_orderbox_top">
            <div class="food_selecttxt">상품이름</div>
            <div class="food_selecttxt">가격</div>
            <div class="food_selecttxt">수량</div>
            <div class="food_selecttxt cancle">삭제</div>
          </div>
          <div class="food_orderbox_container">
          </div>
          <div class="food_orderbox_container2">
            <div class="form-block-3 w-form">
              <form id="email-form-2" name="email-form-2" data-name="Email Form 2" method="get">
                <div>요청사항</div><textarea placeholder="Example Text" maxlength="5000" id="pleasetext" name="field-2" data-name="field" class="option_input w-input"></textarea>
              </form>
            </div>
            <div class="food_orderbox_warp2">
              <div>총 주문금액<span class="order_fee" id="allprice">0원</span></div>
            </div>
            <div class="btnbox">
              <a href="#" class="foodorder_btn w-button" onclick="closeopenpop()">취소</a>
              <a href="#" class="foodorder_btn _2 w-button" onclick="ordermenu()">주문하기</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ================================================================================================================================================================-->
  <!-- 게임 검색 -->
  <div class="frame" id="gamebody" style="display:none;">
    <div class="common_container2">
      <div class="top">
        <a href="javascript:returnpop()" class="top_closebtn w-inline-block"><img src="../user/images/Icon-awesome-backspace.svg" loading="lazy" alt="" class="image-8"></a>
        <div class="search_box">
          <div class="form-block-2 w-form">
            <form method="get" id="searchForm" onsubmit="return false;">
              <input type="hidden" name="people" id="people"/> <!--인원-->
              <input type="hidden" name="playTime" id="playTime"/> <!--플레이 시간-->
              <input type="hidden" name="explanTime" id="explanTime"/> <!--설명 시간-->
              <input type="hidden" name="Genre" id="Genre"/> <!--장르-->
              <input type="hidden" name="Level" id="Level"/> <!--난이도-->
              <input type="text" class="text-field-2 w-input" maxlength="256" name="gamesearch" id="gamesearch" placeholder="게임명 검색" required="">
            </form>
          </div>
          <a href="javascript:search()" class="link-block w-inline-block"><img src="../user/images/Icon-feather-search.svg" loading="lazy" alt="" class="image-7"></a>
        </div>
        <div class="btn_topblock">
          <a href="#" class="wifi w-inline-block" onclick="openMainPop('wifipop')"><img src="../user/images/wifi.svg" loading="lazy" alt="" class="image-2"></a>
          <a href="#" class="callbtn w-inline-block" onclick="openMainPop('callpop')"><img src="../user/images/bell.svg" loading="lazy" alt="" class="bell">
            <div>직원 호출</div>
          </a>
          <div class="room">
            <div></div>
          </div>
          <a href="#" class="paytbtn w-inline-block" onclick="lastprice()">
            <div>후불금액 확인</div>
          </a>
          <div class="lefttime" onclick="openMainPop('addtime')" style="cursor:pointer">
            <div>남은시간: 10:10</div>
          </div>
          <div class="time" style="cursor:pointer">
            <div class = "currentTime"></div>
          </div>
        </div>
      </div>
      <div class="gameblock">
        <div class="category_block">
          <div class="category_box1">
            <div class="gamesubject_title _1">
              <div>인원</div>
            </div>
            <div class="gamesubject_title">
              <div>PLAY 시간</div>
            </div>
            <div class="gamesubject_title">
              <div>설명시간</div>
            </div>
            <div class="gamesubject_title">
              <div>장르</div>
            </div>
            <div class="gamesubject_title _2">
              <div>난이도</div>
            </div>
          </div>
          <div class="category_box2">
            <div class="category_scroll" id="user_a">
              <a href="#" class="button-3 w-button" onclick="userselpop(this)" value="2">2명</a>
              <a href="#" class="button-3 w-button" onclick="userselpop(this)" value="3">3명</a>
              <a href="#" class="button-3 w-button" onclick="userselpop(this)" value="4">4명</a>
              <a href="#" class="button-3 w-button" onclick="userselpop(this)" value="5">5명</a>
              <a href="#" class="button-3 w-button" onclick="userselpop(this)" value="6">5명이상</a>
            </div>
            <div class="category_scroll" id="play_a">
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'playTime','playtime_')">30분 미만</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'playTime','playtime_')">30분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'playTime','playtime_')">45분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'playTime','playtime_')">1시간</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'playTime','playtime_')">1시간 이상</a>
              
            </div>
            <div class="category_scroll" id="explan_a">
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'explanTime','explantime_')">5분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'explanTime','explantime_')">10분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'explanTime','explantime_')">15분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'explanTime','explantime_')">20분</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'explanTime','explantime_')">30분</a>
            </div>
            <div class="category_scroll"id="genre_a">
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Genre','genre_')">경쟁</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Genre','genre_')">추리</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Genre','genre_')">사고</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Genre','genre_')">순발력</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Genre','genre_')">전략</a>
            </div>
            <div class="category_scroll" id="level_a">
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Level','level_')">easy</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Level','level_')">normal</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Level','level_')">hard</a>
              <a href="#" class="button-3 w-button" onclick="selcommonpop(this,'Level','level_')">very hard</a>
            </div>
          </div>
        </div>
        <div class="game_tagbox">
          <div class="overflow_none">
            <div class="horizon_scroll" style="display:none;">
              <div class="gametag" id="user_" style="display:none;" onclick="selclosepop1(this)">
                <div class="text-block" id="user_text"></div>
                <a href="#" class="gametag_cancle w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-3"></a>
              </div>
              <div class="gametag" id="playtime_" style="display:none;" onclick="selclosepop1(this)">
                <div class="text-block" id="playtime_text"></div>
                <a href="#" class="gametag_cancle w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-3"></a>
              </div>
              <div class="gametag" id="explantime_" style="display:none;"onclick="selclosepop1(this)">
                <div class="text-block" id="explantime_text"></div>
                <a href="#" class="gametag_cancle w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-3"></a>
              </div>
              <div class="gametag" id="genre_" style="display:none;"onclick="selclosepop1(this)">
                <div class="text-block" id="genre_text"></div>
                <a href="#" class="gametag_cancle w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-3"></a>
              </div>
              <div class="gametag" id="level_" style="display:none;"onclick="selclosepop1(this)">
                <div class="text-block" id="level_text"></div>
                <a href="#" class="gametag_cancle w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-3"></a>
              </div>
            </div>
          </div>
        </div>
        <span id="result">
          <% for(var i = 0; i < row.length ; i++) { %>
            <div class="gameinfo_blcok">
              <div class="gameinfo_box1"><img src="/<%= row[i].pic %>" style="height:237px;"  loading="lazy" alt="" class="image-4">
                <a href="javascript:void(0)" class="gameinfo_mapbtn w-inline-block">
                  <div>진열위치<span class="text-span"><%= row[i].loc %></span></div>
                </a>
              </div>
              <div class="gameinfo_box2">
                <div class="gameinfo_title"><%= row[i].Kname %><span class="subtitle"><%= row[i].Ename %></span></div>
                  <div class="gameinfo_category">
                    <div class="gameinfo_circle">
                      <div class="gameinfo_circletxt"><span class="text-span-2" id="umin">인원<br></span><%= row[i].umin %>명~<%= row[i].umax %>명</div>
                    </div>
                    <div class="gameinfo_circle">
                      <div class="gameinfo_circletxt"><span class="text-span-2" id="playtime">시간<br>‍</span><%= row[i].playtime %></div>
                    </div>
                    <div class="gameinfo_circle">
                      <div class="gameinfo_circletxt"><span class="text-span-2" id="explantime">설명<br></span><%= row[i].explantime %></div>
                    </div>
                    <div class="gameinfo_circle">
                      <div class="gameinfo_circletxt"><span class="text-span-2" id="genre">장르<br></span><%= row[i].genre %></div>
                    </div>
                    <div class="gameinfo_circle div-block-2">
                      <div><%= row[i].level %></div>
                    </div>
                  </div>
                  <div><%= row[i].simexplan %></div>
              </div>
              <div class="gameinfo_box3">
                <a href="javascript:videopop('<%= row[i].idx %>')" class="gameinfo_btn _2 w-inline-block"><img src="../user/images/Icon-awesome-youtube.svg" loading="lazy" alt="" class="youtubeimg">
                  <div>설명영상</div>
                </a>
                <a href="javascript:explanpop('<%= row[i].idx %>')" class="gameinfo_btn w-inline-block">
                  <div>게임설명</div>
                </a>
                <a href="javascript:questionpop('<%= row[i].idx %>')" class="gameinfo_btn w-inline-block">
                  <div>자주묻는 질문</div>
                </a>
              </div>
            </div>
          <%}%>
        </span>
      </div>
    </div>    
  </div>
  <!-- ============================================================================================================== -->
  <!-- 팝업 -->
  <div class="popup" style="display:flex;">   
    <div class="room_numpop" style="display:flex;">
      <div class="room_numpopbox">
        <div class="poptitle">방 번호 설정</div>
        <!-- <a href="#" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a> -->
        <div class="pop_box">
          <div class="form-block-10 w-form">
            <form id="email-form-2" name="email-form-2" data-name="Email Form 2" method="get">
              <div>방 별 번호 설정</div><select id="roomnumset" name="field-2" data-name="Field 2"  multiple=""class="room_number_select w-select">
                <option value="0" selected>방 번호를 선택해주세요.</option>
                <% for(var i = 0; i < room.length ; i++) { %>
                  <option value="<%=room[i].idx%>"><%=room[i].roomNm%></option>
                <%}%>
              </select>
            </form>
          </div>
        </div>
        <a href="javascript:roomnum()" class="addtime_btn w-button">확인</a>
        
      </div>
    </div>
    <!-- 음식 주문 팝업(주문 목록 삭제) -->  
    <div class="food_canclepop" id="ordercanall" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>주문목록이 전부 삭제됩니다. <br>주문을 취소하시겠습니까?</div>
        </div>
        <div class="btnarea2">
          <a href="javascript:closeMainPop()" class="button-31 cancle w-button">취소</a>
          <a href="#" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <div class="food_canclepop" id="orderque" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>주문을 하시겠습니까?</div>
        </div>
        <div class="btnarea2">
          <a href="javascript:closeMainPop()" class="button-31 cancle w-button">취소</a>
          <a href="#" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <div class="food_canclepop" id="success" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>주문이 완료되었습니다.</div>
        </div>
        <div class="btnarea2">
          <a href="#" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <div class="food_canclepop" id="orderfail" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>메뉴를 담아주세요.</div>
        </div>
        <div class="btnarea2">
          <a href="#" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <div class="food_canclepop" id="addtimefail" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>시간 추가가 불가능합니다.</div>
          <div>(사유: 해당 시간에 예약 존재)</div>
        </div>
        <div class="btnarea2">
          <a href="javascript:open('addtime')" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <div class="food_canclepop" id="addsuccess" style="display:none;">
      <div class="nomalpop_box">
        <div class="poptitle">알림</div>
        <div class="nomalpop_warp">
          <div>시간 추가가 완료되었습니다.</div>
        </div>
        <div class="btnarea2">
          <a href="#" class="button-31 w-button" onclick="Allclose()">확인</a>
        </div>
      </div>
    </div>
    <!-- // -->
    <!-- 게임 검색 팝업(설명영상,게임설명,자주묻는 질문) -->
    <div class="commonpop" style="display:none;">
      <div class="commonpopbox">
        <div>준비된 영상이 없습니다.</div>
      </div>
    </div>
    <div class="game_videopop" style="display:none;">
      <div class="game_videopopbox">
        <a href="javascript:closePop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="game_videopop_warp">
          <div data-delay="4000" data-animation="slide" class="slider-3 w-slider" data-autoplay="false" data-easing="ease" data-hide-arrows="false" data-disable-swipe="false" data-autoplay-limit="0" data-nav-spacing="3" data-duration="500" data-infinite="true">
            <div class="w-slider-mask">
              <div class="w-slide">
                <div class="gamevideo_qr">
                  <video id="vid_" src="/1651124277196__Load - 110602.mp4" width="1000px" height="500px" muted="muted" controls="controls" autoplay="autoplay" loop="loop"></video>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="game_explanationpop" id="game_explanationpop" style="display:none;">
      <div class="game_popbox">
        <div class="poptitle">게임설명</div>
        <a href="javascript:closePop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="explanation_warp">
          <div class="title" id="explantitle">게임 이름</div>
          <div class="explanation_container">
            <div id="explan_text" style="word-wrap: break-word; width:100%;" ></div>
          </div>
        </div>
      </div>
    </div>
    <div class="game_questionpop" style="display:none;">
      <div class="game_popbox">
        <div class="poptitle">자주묻는 질문</div>
        <a href="javascript:closePop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="explanation_warp">
          <div class="title" id="quetitle">게임이름</div>
          <div class="game_questionscroll">
            <a href="#" class="game_toggletbox w-inline-block" style="display:flex;">
              <div class="game_toggletitle">질문:</div>
              <div class="game_togglecontent"><span class="game_a">답변:</span></div>
              <div class="gmae_toggledate"></div>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- // -->
    <!-- 상단바 공통 팝업(와이파이,직원호출,후불금액 확인,시간추가) -->
    <div class="wifipop" style="display:none;">
      <div class="wifipopbox">
        <div class="poptitle">Wifi</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box" id="wifi_pop">
        </div>
      </div>
    </div>
    <div class="callpop" style="display:none;">
      <div class="callpopbox">
        <div class="poptitle">직원 호출</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div>직원이 호출되었습니다. 자리에서 잠시 기다려주세요.</div>
          <div class="pop_warntxt">※주의 사항※<br>카페 상황이 혼잡할 경우 시간이 지체 될 수 있습니다. 그럴 경우 5분정도만 기다려주세요. 5분 이후에도 직원이 오지 않을 시 다시 호출 해 주세요.</div>
        </div>
      </div>
    </div>
    <div class="exsitpop" style="display:none;" id="exsitpop_10"> 
      <div class="exsitpopbox" >
        <div class="poptitle">알림</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div>사용시간이 10분 남았습니다.</div>
          <div class="pop_warntxt">시간 추가를 원하실 경우 하단의 시간 추가 버튼을 클릭해 주세요</div>
        </div>
        <a href="javascript:openMainPop('addtime')" class="button-20 w-button">시간 추가</a>
      </div>
    </div>
    <div class="exsitpop" style="display:none;" id="exsitpop_5"> 
      <div class="exsitpopbox" >
        <div class="poptitle">알림</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div>사용시간이 5분 남았습니다.</div>
          <div class="pop_warntxt">시간 추가를 원하실 경우 하단의 시간 추가 버튼을 클릭해 주세요</div>
        </div>
        <a href="javascript:openMainPop('addtime')" class="button-20 w-button">시간 추가</a>
      </div>
    </div>
    <div class="exsitpop" style="display:none;" id="exsitpop_end"> 
      <div class="exsitpopbox" >
        <div class="poptitle">알림</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div>사용이 종료되었습니다.</div>
          <div class="pop_warntxt">시간 추가를 원하실 경우 하단의 시간 추가 버튼을 클릭해 주세요</div>
        </div>
        <a href="javascript:openMainPop('addtime')" class="button-20 w-button">시간 추가</a>
      </div>
    </div>
    <div class="addtime" style="display:none;">
      <div class="exsitpopbox">
        <div class="poptitle">사용시간 추가</div>
        <a href="javascript:closeMainPop()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div class="form-block-10 w-form">
            <form id="email-form-2" name="email-form-2" data-name="Email Form 2" method="get">
              <div>추가시간 설정</div><select id="addtimeset" name="field-2" data-name="Field 2" multiple="" class="room_number_select w-select">
                <% for(var i = 30; i < 121 ; i+=10) { %>
                  <option value="<%=i %>"><%=i %>분</option>
                <%}%>
                
              </select>
            </form>
          </div>
          <div class="pop_warntxt">추가 사용시간은 후불로 결재가 진행됩니다.</div>
        </div>
        <div class="btnwarp">
          <a href="javascript:AddTime()" class="addtime_btn w-button">확인</a>
          <a href="javascript:closePop()" class="addtime_btn _2 w-button">취소</a>
        </div>
      </div>
    </div>
    <div class="front_receiptpop" style="display:none;">
      <div class="front_receiptbox">
        <div class="poptitle">현재 지불액 (후불 확인)</div>
        <a href="javascript:lastpriceclose()" class="popexist w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="front_receiptwarp">
          <div class="receipt">
            <div class="receipt_timewarp">
              <div class="receipt_time" id="start_time">시작시간 - 18:00</div>
              <div class="receipt_time" id="use_time">사용시간- 02:00</div>
              <div class="receipt_time" id="left_time">남은시간- 00:30</div>
            </div>
            <div class="receipttitle">주문 내역</div>
            <span id="orderdetail">
            </span>
            <div class="receipttitle">총 결제 금액 </div>
            <div class="receipttext">
              <div>선결제(방결제)</div>
              <div id="presell"></div>
            </div>
            <div class="receipttext">
              <div >후불결제</div>
              <div id="nextsell"></div>
            </div>
          </div>
        </div>
        <div class="btnarea2">
          <a href="javascript:Allclose()" class="button-31 w-button">확인</a>
        </div>
      </div>
    </div>
    <div class="innerroom_pop" style="display:none;">
      <div class="innerroom_popbox">
        <div class="poptitle">알림</div>
        <a href="#" class="popexist w-inline-block"><img src="images/close_icon.svg" loading="lazy" alt="" class="exsiticon"></a>
        <div class="pop_box">
          <div class="form-block-10 w-form">
            <div>준비된 영상이 없습니다</div>
          </div>
        </div>
      </div>
    </div>
    <!-- // -->
    <!-- // -->
  </div> 
  <!-- 팝업 종료=========================================================================================================================== -->
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=61fb361452ff0215fe4db1db" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../user/js/webflow.js" type="text/javascript"></script>
  <script src="../js/currentTime.js" type="text/javascript"></script>
  <script src="../js/socket.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <style>
    .chatting_scroll::-webkit-scrollbar {
    width: 4px;
    height:4px;
    
    }
    .chatting_scroll::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
  
    }
    .front_receiptwarp::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .front_receiptwarp::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    .food_selectscroll::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .food_selectscroll::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    .food_orderbox_container::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .food_orderbox_container::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    .game_tagbox::-webkit-scrollbar {display: none;}
		.game_tagbox {-ms-overflow-style: none;}
    .game_questionscroll::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .game_questionscroll::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    .explanation_container::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .explanation_container::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    .reservepop_scroll::-webkit-scrollbar {
    width: 4px;
    height:4px;
    }
    .reservepop_scroll::-webkit-scrollbar-thumb {
    background: #a9a9a9;
    border-radius:20px;
    opacity:50%;
    }
    #infobox_{
      width: 2000px;
      height:150px;
      text-align: center;
      line-height:250px;
    }
    #foodnomsg{
      width: 700px;
      height:500px;
      text-align: center;
      line-height:530px;
    }
  
  </style>
</body>
</html>
<script>
  // ---------------소켓
  var room_idx=0;
  var room_roomNm=0;
  function setRoomLogin(){
    console.log('setRoomLogin ..... ');
    console.log("roomnum:",$("#roomnumset option:selected").text())
    var roomNum = $("#roomnumset option:selected").text();
    room_roomNm = roomNum;
    let obj = new Object();
    obj.protocol = "autoLogin";
    obj.roomNum = roomNum;    
    doSend(JSON.stringify(obj));
  }  
  function chatSend(){
    let chat = $("#chat").val();
    let time = new Date()
    if(chat.length == 0){
      alert("채팅입력"); 
      return;
    }     
    let str = '';    
    str += '<div class="chatting _1">';
    str += '<div class="chatbox _1">';
    str += '<div style = "word-break:break-all">'+chat+'</div></div>';
    str += '<div class="chattime">'+dateTimeOfficialFormat(time)+'</div></div>';
    $(".chatting_scroll").append(str);
    $("#chat").val('');
    var roomNum = room_roomNm;
    let obj = new Object();
    obj.protocol = "toFront";
    obj.roomNum = roomNum;
    obj.chat = chat;
    obj.time = time;
    doSend(JSON.stringify(obj));
  }
  function orderSend(menuData){
    let menuorderData = [];
    var roomNum = room_roomNm;
    let obj = new Object();
    
    obj.protocol = "toFrontOrder";
    obj.roomNum = roomNum;
    for(i=0;i<menuData.length;i++){
      menu = {'name':menuData[i].foodName ,'price':menuData[i].foodPrice, 'amount':menuData[i].foodSum , 'request':menuData[i].request};
      menuorderData.push(menu);
      obj.ordermenu = menuorderData;
    }
    doSend(JSON.stringify(obj))
    console.log("obj",obj)
    console.log("보내줌?")
  }
  function checkaddtime(roomNm,time){
    let obj = new Object();
    obj.protocol = "addtimecheck";
    obj.roomNm = roomNm
    obj.time = time
    doSend(JSON.stringify(obj))
  }
  function staffcall(){// 직원 호출 함수
    let obj = new Object();
    obj.protocol = "staffcall";
    obj.idx = room_idx;
    obj.roomNm = room_roomNm
    doSend(JSON.stringify(obj))
  }
  function exit5(){//종료 5분 전 알람 함수
    let obj = new Object();
    obj.protocol = "exit_5";
    obj.idx = room_idx;
    obj.roomNm = room_roomNm
    doSend(JSON.stringify(obj))
  }
  function exitend(){//종료 5분 전 알람 함수
    let obj = new Object();
    obj.protocol = "exit_end";
    obj.idx = room_idx;
    obj.roomNm = room_roomNm
    doSend(JSON.stringify(obj))
  }
  function onMessage(evt) { //받은 메세지를 보여준다      
      var obj = JSON.parse(evt.data);            
      console.log(obj);      
      if(obj.protocol == "answer"){                        
        // 채팅방 디테일 
        let str = '';
        str += '<div class="chatting">';
        str += '<div class="chatting_from">카운터</div>';
        str += '<div class="chatbox _2">';
        str += '<div style = "word-break:break-all">'+obj.chat+'</div></div>';
        str += '<div class="chattime">'+dateTimeFormat(obj.time)+'</div></div>';              
        $(".chatting_scroll").append(str);
      }      
      if(obj.protocol =="timealarm"){
        console.log("idx",obj.idx)
        console.log("obj.",obj)
        room_idx=obj.idx
        room_roomNm = obj.roomNm
        timecalculate()
      }
      if(obj.protocol =="roomendcus"){
        $(".lefttime").html('<div>남은시간: 00:00</div>');
      }
  }    
  

  // 채팅관련---------------
  document.getElementById('vid_').play()
  //===================================
  function roomnum(){
    console.log($("#roomnumset option:selected").val())
    selectOption=$("#roomnumset option:selected").val()
    selectOptiontext=$("#roomnumset option:selected").text()
    if(selectOption==0|| selectOption =='undefined'){
      alert("방 번호를 선택해주세요.")
    }
    else{
      $(".room").html(selectOptiontext+"번방")
      room_idx=selectOption;
      room_roomNm=selectOptiontext
      closeMainPop()
      setRoomLogin()

    }
  }
  init()
  function init(){
    setInterval(minutecheck,1000)
  }
  function minutecheck() {
      let today = new Date()
      let date = new Date(today);
      let month = date.getMonth() + 1;
      let day = date.getDate();
      let hour = date.getHours();
      let minute = date.getMinutes();
      let second = date.getSeconds();
      month = month >= 10 ? month : '0' + month;
      day = day >= 10 ? day : '0' + day;
      hour = hour >= 10 ? hour : '0' + hour;
      minute = minute >= 10 ? minute : '0' + minute;
      second = second >= 10 ? second : '0' + second;

      console.log(date.getFullYear() + '-' + month + '-' + day + ' ' + hour + ':' + minute +':'+second)
      console.log(second)
      if(second == '00'){
        timecalculate()
      }
    }
  // function roomlist_(){
  //   $.ajax({
  //       type : 'get' , 
  //       url : '/roomlist_?idx='+room_idx ,
  //     }).done(function(data){
  //       console.log("data.list3[0].idx:",data.list[0].idx)
  //           timecalculate(data.list[0].idx)
  //     }).fail(function(e){
  //         console.log(JSON.stringify(e));
  //     })
  // }
  function timecalculate(){
    console.log("idx",room_idx)
    $.ajax({
        type : 'get' , 
        url : '/timeCalculate_customer?idx='+room_idx ,
      }).done(function(data){
        let str ='';
        if(data.result == 'success'){
          if(savetimeformat(data.log[0].stime,data.log[0].duration,data.log[0].duration_add).slice(0,1)=='-'){
            console.log("savetime",savetimeformat(data.log[0].stime,data.log[0].duration,data.log[0].duration_add))
            $(".lefttime").html('<div>남은시간: 00:00</div>');
          }
          else{
            console.log("ddd",savetimeformat(data.log[0].stime,data.log[0].duration,data.log[0].duration_add))
            $(".lefttime").html('<div>남은시간 : '+savetimeformat(data.log[0].stime,data.log[0].duration,data.log[0].duration_add)+'</div>');
            endtimealarm(savetimeformat(data.log[0].stime,data.log[0].duration,data.log[0].duration_add))
          }
        } 
        if(data.result =='fail'){
          $(".lefttime").html('<div>남은시간: 00:00</div>');
        }
      }).fail(function(e){
          console.log(JSON.stringify(e));
      })
  }
  function endtimealarm(time){
    console.log("time",time)
    var savetime0 = time.split(':')[0]
    var savetime1 = time.split(":")[1]
    console.log("savetime",savetime0,savetime1)
    if(savetime0 == '0'&& savetime1 == '10'){
      closeMainPop()
      $("#exsitpop_10").css('display','flex')
      $(".popup").css('display','flex')
    }
    else if(savetime0 == '0' && savetime1 == '05'){
      closeMainPop()
      $("#exsitpop_5").css('display','flex')
      $(".popup").css('display','flex')
      exit5()
    }else if(savetime0 == '0' && savetime1 =='00'){
      closeMainPop()
      $("#exsitpop_end").css('display','flex')
      $(".popup").css('display','flex')
      exitend()
    }
  }

  //=================================================================================>한 화면에서 게임검색,음식주문,돌아오기 팝업
  function gamepop(){
    $("#mainbody").css('display','none');
    $("#gamebody").css('display','flex');
  }
  function foodpop(){
    $("#mainbody").css('display','none');
    $("#foodbody").css('display','flex');
    clickFood(this,'All');
  }
  function returnpop(){
    $("#mainbody").css('display','flex');
    $("#foodbody").css('display','none'); // 음식에서 메인으로 갈때는 주문안된 내역 삭제된다고 안내문구 
    $("#gamebody").css('display','none');
    gameBodyInit();
    foodBodyInit();
    //location.reload();//뒤로가기 누르면 새로고침됨 -> 이거 가능??
  }
  function gameBodyInit(){
    // 선택된 검색 필터 옵션 해제 
    $(".category_scroll").find("a.select").removeClass("select");
    // 선택된 검색 필터 태그 삭제 
    $(".gametag").find("div").text(""); //안써도 되긴함
    $(".gametag").css("display","none");
    // 검색어 없는 상태로 만들어서 
    $("#searchForm").find("input").val('');
    search(); // 검색 실행 
  }
  function foodBodyInit(){
    clickFood(this,'All')
    $(".food_subblock").parent().find('a').removeClass("click");
    $("#all_").addClass("click");
    $(".food_orderbox_container").html('')
    document.getElementById("pleasetext").value='';
    $("#allprice").html("0원")


  }
  //======================================================>메인 직원호출,와이파이,후불금액,남은시간 등 팝업 (음식 주문 팝업 = food_canclepop)
  // 공통 팝업 //
  function openMainPop(classNm){
    closeMainPop();
    $("."+classNm).css('display','flex');
    $(".popup").css('display','flex');
    if(classNm == 'wifipop'){
        $("#wifi_pop").html('')
        $.ajax({
        type : 'get' , 
        url : '/wifipop', 
      }).done(function(data){
        if(data.result == 'success'){
          if(data.wifi.length == 0 || data.wifi[0].id1 == ''){
            $("#wifi_pop").html(' <div id="readywifi" style="color:#a9a9a9">wifi가 준비중입니다.</div>')
          }
          else{
            $("#wifi_pop").append('<div id="wifiidpw">WIFI :'+data.wifi[0].id1+' , '+data.wifi[0].id2+'<br>PW : '+data.wifi[0].pw+'<br><br>와이파이는 두 종류 모두 사용가능합니다.</div>')
            $("#wifi_pop").append('<div class="pop_warntxt">※주의 사항※<br>~와이파이 사용 시 주의사항~</div>')
          }
        }
      }).fail(function(e){
        console.log(JSON.stringify(e));
      })
    }
    else if(classNm == "callpop"){
      staffcall()
    }
  }
  function closeMainPop(){
    $(".room_numpop").css('display','none');
    $(".wifipop").css('display','none');
    $("#exsitpop_10").css('display','none');
    $("#exsitpop_5").css('display','none');
    $("#exsitpop_end").css('display','none');
    $(".callpop").css("display",'none');
    $(".addtime").css('display','none');
    $(".front_receiptpop").css('display','none');
    $("#ordercanall").css('display','none');
    $("#success").css('display','none');
    $("#orderque").css('display','none');
    $("#orderfail").css('display','none');
    $("#addsuccess").css('display','none');
    $("#addtimefail").css('display','none');
    $(".popup").css('display','none');
    // $("#orderdetail").children().remove();
    // $("#nextsell").html("0원");
  }
  // =============================================================//
  
  //======================================================================================================================>게임 검색 화면
  //설명영상, 게임설명 팝업//
  function closePop(){
    $(".commonpop").css('display','none');
    $("#game_explanationpop").css('display','none');
    $(".game_questionpop").css('display','none');
    $(".game_videopop").css('display','none');
    $(".popup").css('display','none');
    $("#explan_text").text('');
    $(".gamevideo_qr").html('<video id="vid_" src="/1651124277196__Load - 110602.mp4" width="1000px" height="1000px" muted controls muted autoplay playsinline></video>')
   
  }
  function videopop(idx){//설명영상
    $.ajax({
      type : 'get' , 
      url : '/getVideo?idx='+idx , 
    }).done(function(data){
      if(data.result == 'success'){
        console.log("원래 url", $("#vid_").attr('src'))
        $("#vid_").attr('src',"/"+data.msg);
        console.log("바뀐 url", $("#vid_").attr('src'))
        $(".game_videopop").css('display','flex');
        $(".popup").css('display','flex');
      }
      else if (data.result == 'fail'){
       commonpop('준비된 영상이 없습니다')
      } 
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })
  }
  function explanpop(idx){//게임설명
    $.ajax({
      type : 'get' , 
      url : '/getExplan?idx='+idx , 
    }).done(function(data){         
      if(data.result == 'success'){
        $("#explantitle").html(data.msg[0].Kname);
        $("#explan_text").text(data.msg[0].explan);
        texta('explan_text')
        $("#game_explanationpop").css('display','flex');
        $(".popup").css('display','flex');
      }
      else if (data.result == 'fail'){
       commonpop('준비된 게임 설명이 없습니다')
      } 
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })            
  }
  function texta(id){
    var str = $("#explan_text").html();
    console.log($("#"+id).html())
    str = str.replace(/(?:\r\n|\r|\n)/g, '<br />');
    $("#"+id).html(str);
  }
  
  function togglebox(self){    
    $(self).children(".game_togglecontent").slideToggle();
  }
  function questionpop(idx){//자주묻는 질문
    $.ajax({
      type : 'get' , 
      url : '/getQuestion?idx='+idx , 
    }).done(function(data){        
      if(data.result == 'success'){
        let str ='' 
        for(i=data.msg.length-1;i>-1;i--){
          var answer=data.msg[i].ans;
          console.log("answer",answer)
          answer=answer.replace(/(?:\r\n|\r|\n)/g, '<br />');
          console.log("answer2",answer)
          str+='<a href= "#" class="game_toggletbox w-inline-block" onclick="togglebox(this)" style="display:flex;">';
          str+='<div class="game_toggletitle"" >질문:'+ data.msg[i].que+'</div>';
          str+='<div class="game_togglecontent">답변:'+'<span class="game_a" style="word-wrap:break-word;">'+' '+answer+'</span></div>';
          str+='<div class="gmae_toggledate">'+ new Date(data.msg[i].udate).toLocaleString()+'</div>';
          str+='</a>';
        }
        console.log("제목:", $("#quetitle").html(data.msg2[0].Kname))
        $("#quetitle").html(data.msg2[0].Kname);
        $(".game_questionscroll").html(str);
        $(".game_questionpop").css('display','flex');
        $(".popup").css('display','flex');
        
      }
      else{
        commonpop('준비된 질문이 없습니다')
      }
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })
  }
  function commonpop(con){
    closePop()
    $(".commonpopbox").html(con)
    $(".commonpop").css('display','flex');
    $(".popup").css('display','flex');
    setTimeout(function(){$(".commonpop").css('display','none');},1000);
    setTimeout(function(){$(".popup").css('display','none');},1000);
 }
  //=---------------------------------------------------------------------------->>검색 옵션 설정(포함,삭제)
  function selclosepop1(self){//게임 옵션 클로즈(X)누르면 발생
    console.log("id",$(self).attr('id'))
    $(self).css('display','none');
    if($(self).attr('id') == 'user_'){
        $("#people").val('');
        $("#user_a").find('a').removeClass("select")//find('a')--> <a></a>형식들 찾아줌
        $("#user_text").html('');
    }else if($(self).attr('id') == 'playtime_'){
      $("#playTime").val('');
      $("#play_a").find('a').removeClass("select")//find('a')--> <a></a>형식들 찾아줌
      $("#playtime_text").html('');
    }else if($(self).attr('id') == 'explantime_'){
      $("#explanTime").val('');
      $("#explan_a").find('a').removeClass("select")//find('a')--> <a></a>형식들 찾아줌
      $("#explantime_text").html('');
    }else if($(self).attr('id') == 'genre_'){
      $("#Genre").val('');
      $("#genre_a").find('a').removeClass("select")//find('a')--> <a></a>형식들 찾아줌
      $("#genre_text").html('');
    }else if($(self).attr('id') == 'level_'){
      $("#Level").val('');
      $("#level_a").find('a').removeClass("select")//find('a')--> <a></a>형식들 찾아줌
      $("#level_text").html('');
    }
    search();          
  }

  function userselpop(self){//인원 옵션 선택
    const user = $(self).attr('value')//2 이런식으로 들어옴
    console.log("user",user)
    $(self).parent().find('a').removeClass("select");
    $(self).addClass("select");
    if( user != 6){
     $("#user_text").html(user+'명');// 텍스트 변경
    }
    else if(user ==6){
      $("#user_text").html('5명이상');
    }
    $("#user_").css('display','flex');//검색옵션 부분에 2명 이런식으로 나타남 
    $(".horizon_scroll").css('display','flex');
    $("#people").val(user);//id=people인 input의 요소값을 user로 설정
    search();
  }
  function selcommonpop(self,id,text){
    const user = $(self).html()
    console.log("user",user)
    $(self).parent().find('a').removeClass("select");
    $(self).addClass("select");
    $("#"+text+"text").html(user);
    $("#"+text).css('display','flex');
    $(".horizon_scroll").css('display','flex');
    $("#"+id).val(user);//id=people인 input의 요소값을 user로 설정
    console.log(id+" value",$("#"+id).val())
    search();
  }
  //------------------------------------------------------------게임 검색하기(검색옵션,게임이름으로)
  $(document).ready(function() {
    // setRoomLogin(); // 채팅할 게임 방번호 셋팅 
    $("#chat").keydown(function (key) {       
        if (key.keyCode == 13) {
            chatSend();
        }
    });
    // ID가 message에서 엔터키를 누를 경우
    $("#gamesearch").keydown(function (key) {        
        if (key.keyCode == 13) {
            search();
        }
    });
  });
  function search(){
    console.log("메롱:",$("#gamesearch").val())
    let data = $("#searchForm").serialize();
    data = decodeURIComponent(data);
    console.log("searchForm:: ",data)
    $.ajax({
      type : 'post' , 
      url : '/getSearch' , 
      data : data,
      dataType : 'json' ,
    }).done(function(data){  
      console.log("info",data.msg)
      console.log("info.length",data.msg.length)
      $("#result").html(datalist(data));
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })            
  }
  //---------------------------------------------------------------------->>게임 리스팅하는 함수
  function datalist(data){
    let str = '';
    if(data.msg[0].idx == null){// 왜? data.msg.length ==0 이면 안된다..
      console.log("여기 들어옴???  null qnqns")
      str+='<div class="gameinfo_blcok" >';
      str+='<div id="infobox_">검색 된 게임이 없습니다.</div>';
      str+='</div>';  
    }
    else{
        for(i=0;i<data.msg.length;i++){
          console.log("리스트 이름: ",data.msg[i].Kname)
          str+='<div class="gameinfo_blcok">';
          str+='<div class="gameinfo_box1"><img src="/'+ data.msg[i].pic+'" style="height:237px;" loading="lazy" alt="" class="image-4">';
          str+='<a href="#" class="gameinfo_mapbtn w-inline-block">';
          str+='<div>진열위치<span class="text-span">'+ data.msg[i].loc+'</span></div>';
          str+='</a>';
          str+='</div>';
          str+='<div class="gameinfo_box2">';
          str+='<div class="gameinfo_title">'+ data.msg[i].Kname+'<span class="subtitle">'+ data.msg[i].Ename+'</span></div>';
          str+='<div class="gameinfo_category">';
          str+='<div class="gameinfo_circle">';
          str+='<div class="gameinfo_circletxt"><span class="text-span-2">인원<br></span>'+ data.msg[i].umin+'명~'+ data.msg[i].umax+'명</div>';
          str+='</div>';
          str+='<div class="gameinfo_circle">';
          str+='<div class="gameinfo_circletxt"><span class="text-span-2">시간<br>‍</span>'+ data.msg[i].playtime+'</div>';
          str+='</div>';
          str+='<div class="gameinfo_circle">';
          str+='<div class="gameinfo_circletxt"><span class="text-span-2">설명<br></span>'+ data.msg[i].explantime+'</div>';
          str+='</div>';
          str+='<div class="gameinfo_circle">';
          str+='<div class="gameinfo_circletxt"><span class="text-span-2">장르<br></span>'+ data.msg[i].genre+'</div>';
          str+='</div>';
          str+='<div class="gameinfo_circle div-block-2">';
          str+='<div>'+ data.msg[i].level+'</div>';
          str+='</div>';
          str+='</div>';
          str+='<div>'+ data.msg[i].simexplan+'</div>';
          str+='<div class="gameinfo_hash">';
          str+='</div>';
          str+='</div>';
          str+='<div class="gameinfo_box3">';
          str+='<a href="javascript:videopop('+ data.msg[i].idx+')" class="gameinfo_btn _2 w-inline-block"><img src="../user/images/Icon-awesome-youtube.svg" loading="lazy" alt="" class="youtubeimg">';
          str+='<div>설명영상</div>';
          str+='</a>';
          str+='<a href="javascript:explanpop('+ data.msg[i].idx+')" class="gameinfo_btn w-inline-block">';
          str+='<div>게임설명</div>';
          str+='</a>';
          str+='<a href="javascript:questionpop('+ data.msg[i].idx+')" class="gameinfo_btn w-inline-block">';
          str+='<div>자주묻는 질문</div>';
          str+='</a>';
          str+='</div>';
          str+='</div>';
      }
    }
    return str;
  }   
  //=================================================================================================================>음식 주문
  function clickFood(self,category){//카테고리별 메뉴 리스팅
    $.ajax({
      type : 'get' , 
      url : '/getlistFood?category='+category ,
    }).done(function(data){
      console.log(data);
      $(self).parent().find('a').removeClass("click");
      $(self).addClass("click");
      let str =''
      if(data.result == 'success'){
        for(i=0; i<data.msg.length; i++){
          str+='<div id="menulist_'+data.msg[i].idx+'"'+' class="food_box"><img src="/'+data.msg[i].pic+'" width="220px" height="160px" loading="lazy" alt="" class="image-5">'
          str+='<div class="food_boxtxt">'
          str+='<div class="foodinfotxt">'+data.msg[i].name+'</div>'
          if(data.msg[i].sell==0){
            str+='<div class="foodinfotxt price">'+data.msg[i].price+'원<span class="soldout">품절</span></div>'
          }else{ 
            str+='<div class="foodinfotxt price">'+data.msg[i].price+'원</div>'
            str+='<a href="javascript:foodsave(\'menulist_'+data.msg[i].idx+'\')" class="button-35 w-button">담기</a>'
          }
          str+='</div>'
          str+='</div>'
        }
      }else{
        // 음식없을때 문구 처리 해주세요 
        str+='<div id="foodnomsg">메뉴가 없습니다.</div>'
      }
      $(".food_selectbox").html(str);
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })           
  }
  function foodsave(id){// 담기 버튼 누르면 실행    
    let foodNm = $("#"+id).find(".food_boxtxt div:eq(0)").html();//메뉴이름
    let foodPrice = Number($("#"+id).find(".food_boxtxt .price").text().split('원')[0]);//메뉴가격
    let foodQuantity = $("#order_"+id.split('_')[1]).find(".food_quantity");   
    console.log("foodsdfksd;",foodQuantity.length) 
    if(foodQuantity.length > 0){
      let foodsum = Number(foodQuantity.html());
      foodQuantity.html(foodsum+1);
      pricesum()
    }else{
      let str =''
      str+='<div class="food_orderbox_warp" id="order_'+id.split('_')[1]+'">'
      str+='<div class="food_selecttxt">'+foodNm+'</div>'
      str+='<div class="food_selecttxt">'+foodPrice+'</div>'
      str+='<div class="quantity_box">'
      str+='<a href="#" class="p_m_btn _2 w-button" onclick="minusfood(this)">-</a>'
      str+='<div class="food_quantity">1</div>'
      str+='<a href="#" class="p_m_btn w-button" onclick="addfood(this)">+</a>'
      str+='</div>'
      str+='<div class="cancle_box">'
      str+='<a href="#" onclick="closeorder(this)" class="link-block-4 w-inline-block"><img src="../user/images/close_icon.svg" loading="lazy" alt="" class="image-6"></a>'
      str+='</div>'
      str+=' </div>'
      $(".food_orderbox_container").append(str) 
      let foodsum = Number($("#"+foodNm).html());
      //총 주문금액 계산 함수 호출
      pricesum()
    }          
  }
  function closeorder(self){//주문목록 상품 삭제
    $(self).parents(".food_orderbox_warp").remove();
    //$("#"+name+'1').remove();
    pricesum()

  }
  function addfood(self){//수량 +
    console.log($(self).parent().find('div').html())
    sum= $(self).parent().find('div').html()
    sum++
    $(self).parent().find('div').html(sum)
    pricesum()
  }
  function minusfood(self){//수량 -
    console.log( $(self).parent().find('div').html())
    minus= $(self).parent().find('div').html()
    if(minus>1){
      minus--
    }
    $(self).parent().find('div').html(minus)
    pricesum()
  }
  function pricesum(){//주문목록에 있는 모든 상품들을 계산해주는 함수
    orderlength=$('.food_orderbox_container').find('.food_orderbox_warp').length
    console.log("orderlength",orderlength)
    sum=0
    if(orderlength==0){
      $("#allprice").html("0원")
    }
    for(i=0;i<orderlength;i++){
      id=$('.food_orderbox_container').find('.food_orderbox_warp:eq('+i+')').attr('id')
      foodNm = $("#"+id).find("div:eq(1)").html();//메뉴이름
      foodsum = $("#"+id).find(".food_quantity").html();//메뉴수량
      sum+=(foodNm*foodsum)
      $("#allprice").html(sum.toLocaleString()+"원")
    }
  }
  function Allclose(){
    $(".front_receiptpop").css('display','none');
    $("#ordercanall").css('display','none');
    $("#success").css('display','none');
    $("#orderfail").css('display','none');
    $("#addtimefail").css('display','none');
    $("#addsuccess").css('display','none');
    $("#exsitpop_10").css('display','none');
    $("#exsitpop_5").css('display','none');
    $("#exsitpop_end").css('display','none');
    $(".food_orderbox_container").html('')
    document.getElementById("pleasetext").value='';
    $("#allprice").html("0원")
    $(".popup").css('display','none');
  }
  function closeopenpop(){
    let orderlength = $('.food_orderbox_container').find('.food_orderbox_warp').length;
    if(orderlength == 0){
      $("#orderfail").css('display','flex');
      $(".popup").css('display','flex');
    }
    else{
      $("#ordercanall").css('display','flex');
      $(".popup").css('display','flex');
    }
  }
  
  function ordermenu(){ //기능 다 되게 하고 코드 간결하게 수정
    console.log("idx,roomNm",room_idx,room_roomNm)
    let orderlength = $('.food_orderbox_container').find('.food_orderbox_warp').length;
    if(orderlength == 0){
      $("#orderfail").css('display','flex');
      $(".popup").css('display','flex');
    }
    else{
        let roomnum = $(".room").html()
        let request = $("#pleasetext").val()
        let menuData = [];
      for(i=0;i<orderlength;i++){          
        id=$('.food_orderbox_container').find('.food_orderbox_warp:eq('+i+')').attr('id')
        foodname = $("#"+id).find(".food_selecttxt:eq(0)").html();//메뉴이름
        foodsum = $("#"+id).find(".food_quantity").html();//메뉴수량
        foodprice =  $("#"+id).find(".food_selecttxt:eq(1)").html();//메뉴가격
        console.log("foodprice",foodprice * foodsum)
        let data = {'ridx' : room_idx ,'midx' : id.split('_')[1],'foodName':foodname ,'foodPrice':foodprice*foodsum, 'foodSum':foodsum , 'request':request};
        menuData.push(data);
        console.log("menudata",menuData)
      }            
      $.ajax({
        type : 'post' , 
        url : '/orderMenu' , 
        data : JSON.stringify(menuData),
        dataType : 'json' ,
      }).done(function(data){  
        if(data.result == 'success'){
          $("#success").css('display','flex');
          $(".popup").css('display','flex');
          orderSend(menuData);
        }
      }).fail(function(e){
        console.log(JSON.stringify(e));
      })            
    }
  }
  function lastprice(){
    $.ajax({
      type : 'get' , 
      url : '/lastprice?idx='+room_idx ,
    }).done(function(data){
      // 영수증 팝업 오프
      console.log("length:",data.list.length)
      $("#start_time").html('시작시간 - '+dateTimeFormat(data.room[0].stime))
      $("#use_time").html('사용시간 - '+(data.room[0].duration+data.room[0].duration_add)+'분')
      $("#left_time").html('남은시간 - '+savetimeformat(data.room[0].stime,data.room[0].duration,data.room[0].duration_add))
      let str2=''
      if(data.room[0].duration_add !=0){
        console.log(" 들어왔니?")
        str2+='<div class="receipttext" id="roomdetail_front">'
        str2+='<div id="time_room">'+data.room[0].duration_add+'분 추가</div>'
        str2+='<span id="people_room">'+data.room[0].people+'명 (<span id="price_room">'+data.room[0].apay.toLocaleString()+"원)"+'</span></span>'
        str2+='</div>'
      }
      $("#orderdetail").prepend(str2);
      let str=''
      let sumprice=0;
      for(let i=0; i<data.list.length; i++){  //주문내역에 각 방의 주문 내역 연결
        if($("#orderdetail_"+data.list[i].midx).length > 0){ // 상세결제내역에 똑같은 메뉴가 있을 때
          let foodQuantity = $("#orderdetail_"+data.list[i].midx).find("#amount_"); 
          let foodsum = Number(foodQuantity.html().split('개')[0]);
          let AllQuantity = foodsum+Number(data.list[i].amount)
          let allprice = AllQuantity * data.list[i].price
          foodQuantity.html(AllQuantity+"개 (<span id='price_menu'>"+allprice.toLocaleString()+"원)"+'</span></span>') 
        }
        else{ // 똑같은 메뉴가 없을 때
          let price = data.list[i].price * data.list[i].amount
          str+='<div class="receipttext" id="orderdetail_'+data.list[i].midx+'">'
          str+='<div id="name_">'+data.list[i].name+'</div>'
          str+='<span id="amount_">'+data.list[i].amount+'개 (<span id="price_menu">'+price.toLocaleString()+"원)"+'</span></span>'
          str+='</div>'
        }
        $("#orderdetail").append(str);
        str=''
      }
      for(let i=0; i<$("#orderdetail").find(".receipttext").length;i++){//주문내역 계산해서 후불결제에 넣기
        let price = stringNumberToInt($("#orderdetail").children('.receipttext:eq('+i+')').find('#price_menu , #price_room').html().split('원')[0])
        sumprice+=price
      }
      $("#presell").html(data.room[0].fpay.toLocaleString()+"원")
      $("#nextsell").html(sumprice.toLocaleString()+"원")
      openMainPop('front_receiptpop')
     
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })           
  }
  function lastpriceclose(){
    $(".front_receiptpop").css('display','none');
    $(".popup").css('display','none');
    $("#orderdetail").children().remove();
    $("#nextsell").html("0원");
  }
  //===================================================================================================(방 시간 추가 기능)
  function AddTime(){
    var addtime = $("#addtimeset option:selected").val();
    $.ajax({
      type : 'get' , 
      url : '/addtime?idx='+room_idx+'&time='+addtime ,
    }).done(function(data){
     if( data. result =='success'){
        console.log("성공!!!!")
        addtimesuccess(room_idx,addtime)
     }
     else if(data.result =='fail'){
        console.log("시간 추가 불가")
        $(".addtime").css('display','none');
        $("#addtimefail").css('display','flex');
     }
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })        
  }
  function addtimesuccess(idx,addtime){
    $.ajax({
      type : 'get' , 
      url : '/addtimesuccess?idx='+room_idx+'&time='+addtime ,
    }).done(function(data){
     if(data.result=='success'){
      console.log("addtimesuccess성공!!")
      $(".addtime").css('display','none');
      $("#addsuccess").css('display','flex');
      $(".popup").css('display','flex');
      timecalculate()
      checkaddtime(room_roomNm,addtime)
     }
    }).fail(function(e){
      console.log(JSON.stringify(e));
    })        
  }
  function open(name){
    $("."+name).css('display','flex');
    $(".popup").css('display','flex');
  }
  //===============================================================================(공통함수)
  function stringNumberToInt(stringNumber){// 숫자 ,로 변환된 문자열을 계산 전에 정수형으로 바꿔줌
    return parseInt(stringNumber.replace(/,/g , ''));
  }
  function dateTimeOfficialFormat(sdate) {//input란에 ISO 시간대로 입력하기 위한 포맷
    let date = new Date(sdate);
    let hour = date.getHours();
    let minute = date.getMinutes();
  
    hour = hour >= 10 ? hour : '0' + hour;
    minute = minute >= 10 ? minute : '0' + minute;
  
    return hour + ':' + minute ;
  }
  function savetimeformat(sdate,duration,duration_add) {//남은 시간 구해주는 함수
    let date = new Date(sdate);
    date.setMinutes(date.getMinutes()+(duration+duration_add))//date = 시작시간+사용시간 / 즉 종료시간
    let hour = date.getHours();
    let minute = date.getMinutes();

    let now = new Date();//현재시간
    let savetime = date.getTime()-now.getTime();//종료시간 - 현재시간 // timestamp값으로 나옴
    var hour2 = Math.floor((savetime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minute2 = Math.floor((savetime % (1000 * 60 * 60)) / (1000 * 60));
    if(minute2<10){
      minute2 = '0'+minute2
    }
    return hour2 + ':' + minute2;
}
function dateTimeFormat(sdate) {
    let date = new Date(sdate);
    let hour = date.getHours();
    let minute = date.getMinutes();

    hour = hour >= 10 ? hour : '0' + hour;
    minute = minute >= 10 ? minute : '0' + minute;

    return hour + ':' + minute;
}

  
</script>

